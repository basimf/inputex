YUI.add("inputex-datepicker",function(e,t){var n=e.inputEx,r=e.Lang;n.DatePickerField=function(e){n.DatePickerField.superclass.constructor.call(this,e)},e.extend(n.DatePickerField,n.DateField,{defaultCalendarOpts:{},setOptions:function(e){n.DatePickerField.superclass.setOptions.call(this,e),this.options.className=e.className?e.className:"inputEx-Field inputEx-DateField inputEx-PickerField inputEx-DatePickerField",this.options.readonly=r.isUndefined(e.readonly)?!0:e.readonly,this.options.calendarOpts=e.calendarOpts||this.defaultCalendarOpts,this.options.zIndex=e.zIndex||4},renderOverlay:function(){this.oOverlay=new e.Overlay({visible:!1,align:{node:this.buttonWrapper,points:[e.WidgetPositionAlign.TL,e.WidgetPositionAlign.BL]},zIndex:this.options.zIndex}),this.oOverlay.render(this.fieldContainer),this.oOverlay.on("visibleChange",function(e){this[e.newVal?"_onOverlayVisible":"_onOverlayHidden"]()},this)},_onClickOutside:function(e){e.target!==this.button&&(!this.options.readonly||e.target._node!==this.el)&&this.oOverlay.hide()},_onOverlayVisible:function(){this.beforeShowOverlay(),this.calendar.show(),this.outsideHandler=this.oOverlay.get("boundingBox").on("mousedownoutside",this._onClickOutside,this)},_onOverlayHidden:function(){this.calendar.hide(),this.outsideHandler&&this.outsideHandler.detach()},_toggleOverlay:function(){this.oOverlay||(this.renderOverlay(),this.renderCalendar());var e=this.oOverlay.get("visible")?"hide":"show";this.oOverlay[e]()},renderComponent:function(){n.DatePickerField.superclass.renderComponent.call(this),this.buttonWrapper=e.Node.create('<span class="inputEx-DatePicker-ButtonWrapper"><button type="button" class="inputEx-DatePicker-Button"></button></span>'),this.buttonWrapper.appendTo(this.wrapEl),this.button=this.buttonWrapper.one(".inputEx-DatePicker-Button"),this.button.on("click",this._toggleOverlay,this),this.options.readonly&&e.one(this.el).on("click",this._toggleOverlay,this)},renderCalendar:function(){if(!!this.calendarRendered)return;var t={showPrevMonth:!0,showNextMonth:!0,date:new Date},n=e.mix(this.options.calendarOpts,t);this.calendar=new e.Calendar(n),n.customRenderer&&this.calendar.set("customRenderer",n.customRenderer),this.calendar.render(this.oOverlay.get("contentBox")),n.plugin&&this.calendar.plug(n.plugin.pluginClass,e.mix({datepicker:this},n.plugin.pluginOptions)),this.calendar.on("dateClick",function(e){if(e.cell.hasClass("yui3-calendar-selection-disabled"))return;var t=e.date;this.setValue(t),this.oOverlay.hide()},this),this.calendarRendered=!0},beforeShowOverlay:function(){if(!!this.calendar){var e=this.getValue(!0),t=this.validate();t&&!!e&&(this.calendar.set("date",e),this.calendar._clearSelection(!0),this.calendar._addDateToSelection(e,1),this.calendar._renderSelectedDates())}},close:function(){this.oOverlay&&this.oOverlay.hide()},disable:function(){return this.button.set("disabled",!0),n.DatePickerField.superclass.disable.call(this)},enable:function(){return this.button.set("disabled",!1),n.DatePickerField.superclass.enable.call(this)}}),n.registerType("datepicker",n.DatePickerField)},"@VERSION@",{requires:["inputex-date","event-outside","node-event-delegate","overlay","calendar"],ix_provides:"datepicker",skinnable:!0});
