YUI.add("inputex-serialize",function(e,t){var n=e.inputEx;n.SerializeField=function(e){n.SerializeField.superclass.constructor.call(this,e)},e.extend(n.SerializeField,n.Field,{setOptions:function(e){n.SerializeField.superclass.setOptions.call(this,e),this.options.className=e.className||"inputEx-SerializedField",this.options.subfield=e.subfield||{type:"string"},this.options.serializer=e.serializer||"json"},renderComponent:function(){this.subfieldWrapper=n.cn("div",{className:"inputEx-SerializedField-SubFieldWrapper"}),this.fieldContainer.appendChild(this.subfieldWrapper);var t={parentEl:this.subfieldWrapper};e.mix(t,this.options.subfield),this.subField=n(t,this)},initEvents:function(){n.SerializeField.superclass.initEvents.call(this),this.subField.on("updated",this.fireUpdatedEvt,this,!0)},getValue:function(){var e=this.subField.getValue();return this.serialize(e)},setValue:function(e,t){var n=this.deserialize(e);this.subField.setValue(n,t)},serialize:function(e){return n.SerializeField.serializers[this.options.serializer].serialize(e)},deserialize:function(e){return n.SerializeField.serializers[this.options.serializer].deserialize(e)},focus:function(){this.subField.focus()}}),n.SerializeField.serializers={json:{serialize:function(t){return e.JSON.stringify(t)},deserialize:function(t){return e.JSON.parse(t)}},xml:{serialize:function(t){if(!XML||!e.Lang.isFunction(XML.ObjTree))return alert("ObjTree.js not loaded."),null;var n=new XML.ObjTree;return n.writeXML(t)},deserialize:function(t){if(!XML||!e.Lang.isFunction(XML.ObjTree))return alert("ObjTree.js not loaded."),null;var n=new XML.ObjTree,r=n.parseXML(t);return r}}},n.registerType("serialize",n.SerializeField,[{type:"type",label:"SubField",name:"subfield"},{type:"select",name:"serializer",label:"Serializer",choices:[{value:"json"},{value:"xml"}],value:"json"}])},"@VERSION@",{requires:["inputex-string","json"],ix_provides:"serialize"});
