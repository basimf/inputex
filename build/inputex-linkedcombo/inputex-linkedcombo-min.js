YUI.add("inputex-linkedcombo",function(e,t){var n=e.Lang,r=e.inputEx;r.LinkedComboField=function(e){r.LinkedComboField.superclass.constructor.call(this,e),n.isUndefined(this.options.value)&&this.setValue(this.getValue(),!1)},e.extend(r.LinkedComboField,r.Field,{setOptions:function(e){r.LinkedComboField.superclass.setOptions.call(this,e),this.options.choices=n.isArray(e.choices)?e.choices:[],this.options.valueSeparator=e.valueSeparator||"_"},renderComponent:function(){var e,t,i,s,o,u,a,f,l,c;this.valuesMatching={},l=function(e,t){return e=n.isObject(e)?e.value:e,t=n.isObject(t)?t.value:t,e===t},c=[];for(e=0,i=this.options.choices.length;e<i;e+=1){a=n.isObject(this.options.choices[e])?this.options.choices[e].value:this.options.choices[e],o=this.options.choices[e].choices,this.valuesMatching[a]=[];if(o)for(t=0,s=o.length;t<s;t+=1)u=o[t],f=n.isObject(u)?u.value:u,this.valuesMatching[a].push(f),r.indexOf(f,c,l)===-1&&c.push(o[t])}this.selects=[],this.selects.push(new r.SelectField({choices:this.options.choices,required:this.options.required})),this.selects.push(new r.SelectField({choices:c,required:this.options.required})),this.fieldContainer.appendChild(this.selects[0].getEl()),this.fieldContainer.appendChild(this.selects[1].getEl())},initEvents:function(){r.LinkedComboField.superclass.initEvents.call(this),this.selects[0].on("updated",function(){this.updateSecondSelectChoices(),this.selects[1].fireUpdatedEvt()},this,!0),this.selects[1].on("updated",function(){this.setClassFromState(),this.fireUpdatedEvt()},this,!0)},updateSecondSelectChoices:function(){var e,t,n,i,s;i=this.valuesMatching[this.selects[0].getValue()],n=this.selects[1].choicesList;for(e=0,t=n.length;e<t;e+=1)s=n[e].value,r.indexOf(s,i)===-1?this.selects[1].hideChoice({position:e},!1):this.selects[1].showChoice({position:e})},setValue:function(e,t){var n;n=e.split(this.options.valueSeparator),this.selects[0].setValue(n[0],!1),this.updateSecondSelectChoices(),this.selects[1].setValue(n[1],!1),r.LinkedComboField.superclass.setValue.call(this,e,t)},getValue:function(){return this.selects[0].getValue()+this.options.valueSeparator+this.selects[1].getValue()},isEmpty:function(){return this.selects[0].isEmpty()&&this.selects[1].isEmpty()},validate:function(){return r.LinkedComboField.superclass.validate.call(this)?this.selects[0].validate()&&this.selects[1].validate():!1}}),e.augment(r.LinkedComboField,r.mixin.choice),r.registerType("linkedcombo",r.LinkedComboField,[{type:"list",name:"choices",label:"Choices",elementType:{type:"group",fields:[{label:"Value",name:"value",value:""},{label:"Label",name:"label"},{type:"list",name:"choices",label:"Choices",elementType:{type:"group",fields:[{label:"Value",name:"value",value:""},{label:"Label",name:"label"}]},value:[],required:!0}]},value:[],required:!0}])},"@VERSION@",{requires:["inputex-select","inputex-choice"]});
