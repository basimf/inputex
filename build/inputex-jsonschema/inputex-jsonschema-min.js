YUI.add("inputex-jsonschema",function(e,t){var n=e.Lang,r=e.inputEx;r.JsonSchema={inputExToSchema:function(e){var t=e.type||"string",n=e||{};if(t=="group"){var i={type:"object",title:n.legend,properties:{}};for(var s=0;s<n.fields.length;s++){var o=n.fields[s],u=o.name;i.properties[u]=r.JsonSchema.inputExToSchema(o)}return i}return t=="number"?{type:"number",optional:typeof n.required=="undefined"?!0:!n.required,title:n.label}:t=="string"?{type:"string",optional:typeof n.required=="undefined"?!0:!n.required,title:n.label}:t=="text"?{type:"string",format:"text",optional:typeof n.required=="undefined"?!0:!n.required,title:n.label,_inputex:{rows:5,cols:50}}:t=="html"?{type:"string",format:"html",optional:typeof n.required=="undefined"?!0:!n.required,title:n.label,_inputex:{}}:t=="list"?{type:"array",title:n.label,items:r.JsonSchema.inputExToSchema(n.elementType),_inputex:{}}:t=="email"?{type:"string",optional:typeof n.required=="undefined"?!0:!n.required,title:n.label,format:"email"}:t=="url"?{type:"string",optional:typeof n.required=="undefined"?!0:!n.required,title:n.label,format:"url"}:t=="time"?{type:"string",optional:typeof n.required=="undefined"?!0:!n.required,title:n.label,format:"time"}:t=="IPv4"?{type:"string",optional:typeof n.required=="undefined"?!0:!n.required,title:n.label,format:"ip-address"}:t=="color"?{type:"string",optional:typeof n.required=="undefined"?!0:!n.required,title:n.label,format:"color"}:t=="date"?{type:"string",optional:typeof n.required=="undefined"?!0:!n.required,title:n.label,format:"date"}:t=="multiselect"||t=="multiautocomplete"?{type:"array",optional:typeof n.required=="undefined"?!0:!n.required,title:n.label,items:typeof n.jsonSchemaRef=="undefined"?{type:"string"}:n.jsonSchemaRef,_inputex:n}:{type:"string",title:n.label,optional:typeof n.required=="undefined"?!0:!n.required,_inputex:n}}},r.JsonSchema.Builder=function(e){var t=e||{};this.options=t,this.schemaToParamMap=t.schemaToParamMap||{title:"label",description:"description",_inputex:null},this.referenceResolver=t.referenceResolver||null,this.defaultOptions=t.defaultOptions||{},this.schemaIdentifierMap=t.schemaIdentifierMap||{}},r.JsonSchema.Builder.prototype={defaultReferenceResolver:function(e){return this.schemaIdentifierMap[e]||null},schemaToInputEx:function(t,r){var i={label:r,name:r},s=this.schemaToParamMap,o=t.$ref,u;if(o){var a=null;this.referenceResolver&&(a=this.referenceResolver(o)),a===null&&(a=this.defaultReferenceResolver(o));if(a===null)throw new Error('Schema for property : "'+r+'" $references "'+o+'", not found');a=e.mix({},a);for(var f in t)t.hasOwnProperty(f)&&n.isUndefined(a[f])&&f!="$ref"&&(a[f]=t[f]);t=a}t.optional||(i.required=!0);for(u in s)if(s.hasOwnProperty(u)){var l=s[u],c=t[u];if(!n.isUndefined(c))if(l===null){if(n.isObject(c))for(var h in c)c.hasOwnProperty(h)&&(i[h]=c[h])}else i[l]=c}t.type||(t.type="object");var p=t.type;n.isArray(p)&&(p.length===0||p.length==1&&p[0]=="any"?p="array":p=p[0]),i.type=p,n.isUndefined(t["default"])||(i.value=t["default"]);if(p=="array")i.type="list",n.isObject(t.items)&&!n.isArray(t.items)&&(i.elementType=this.schemaToInputEx(t.items,r)),t.minItems&&(i.minItems=t.minItems),t.maxItems&&(i.maxItems=t.maxItems);else if(p=="object"){i.type="group",t.title&&n.isUndefined(i.legend)&&(i.legend=t.title);var d=[];r&&(i.name=r);for(u in t.properties)t.properties.hasOwnProperty(u)&&d.push(this.schemaToInputEx(t.properties[u],u));i.fields=d}else if(p=="string"&&(t["enum"]||t.choices)){i.type="select";if(t.choices){i.choices=[];for(var v=0;v<t.choices.length;v++){var m=t.choices[v];i.choices[v]={label:m.label,value:m.value}}}else{i.choices=[];for(var v=0;v<t["enum"].length;v++){var m=t["enum"][v];n.isObject(m)?i.choices[v]={label:m.label,value:m.value}:i.choices[v]={value:m}}}}else p=="string"&&(!n.isUndefined(t.pattern)&&n.isUndefined(i.regexp)&&(n.isString(t.pattern)?i.regexp=new RegExp(t.pattern):i.regexp=t.pattern),!n.isUndefined(t.maxLength)&&n.isUndefined(i.maxLength)&&(i.maxLength=t.maxLength),!n.isUndefined(t.minLength)&&n.isUndefined(i.minLength)&&(i.minLength=t.minLength),!n.isUndefined(t.readonly)&&n.isUndefined(i.readonly)&&(i.readonly=t.readonly),t.format&&(t.format=="html"?i.type="html":t.format=="date"?(i.type="date",i.tooltipIcon=!0):t.format=="url"?i.type="url":t.format=="email"?i.type="email":t.format=="text"?i.type="text":t.format=="time"?i.type="time":t.format=="ip-address"?i.type="IPv4":t.format=="color"&&(i.type="color")));!!t._inputex&&!!t._inputex._type&&(i.type=t._inputex._type);for(var g in this.defaultOptions)this.defaultOptions.hasOwnProperty(g)&&n.isUndefined(i[g])&&(i[g]=this.defaultOptions[g]);return i},formFromInstance:function(e){if(!e||!e.$schema)throw new Error("Invalid json schema instance object. Object must have a '$schema' property.");var t=this.schemaToInputEx(e.$schema);for(var n=0;n<t.fields.length;n++){var r=t.fields[n].name;t.fields[n].value=e[r]}return t}}},"@VERSION@",{requires:["inputex"]});
