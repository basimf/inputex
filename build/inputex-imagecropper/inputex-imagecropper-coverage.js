if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/inputex-imagecropper/inputex-imagecropper.js']) {
   __coverage__['build/inputex-imagecropper/inputex-imagecropper.js'] = {"path":"build/inputex-imagecropper/inputex-imagecropper.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":32},"end":{"line":1,"column":51}}},"2":{"name":"(anonymous_2)","line":27,"loc":{"start":{"line":27,"column":28},"end":{"line":27,"column":46}}},"3":{"name":"(anonymous_3)","line":38,"loc":{"start":{"line":38,"column":15},"end":{"line":38,"column":33}}},"4":{"name":"(anonymous_4)","line":53,"loc":{"start":{"line":53,"column":20},"end":{"line":53,"column":31}}},"5":{"name":"(anonymous_5)","line":67,"loc":{"start":{"line":67,"column":25},"end":{"line":67,"column":37}}},"6":{"name":"(anonymous_6)","line":78,"loc":{"start":{"line":78,"column":13},"end":{"line":78,"column":46}}},"7":{"name":"(anonymous_7)","line":110,"loc":{"start":{"line":110,"column":13},"end":{"line":110,"column":25}}},"8":{"name":"(anonymous_8)","line":117,"loc":{"start":{"line":117,"column":15},"end":{"line":117,"column":27}}},"9":{"name":"(anonymous_9)","line":126,"loc":{"start":{"line":126,"column":17},"end":{"line":126,"column":30}}},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":38},"end":{"line":144,"column":51}}},"11":{"name":"(anonymous_11)","line":155,"loc":{"start":{"line":155,"column":17},"end":{"line":155,"column":30}}},"12":{"name":"(anonymous_12)","line":185,"loc":{"start":{"line":185,"column":15},"end":{"line":185,"column":32}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":238,"column":99}},"2":{"start":{"line":6,"column":3},"end":{"line":7,"column":27}},"3":{"start":{"line":27,"column":0},"end":{"line":29,"column":2}},"4":{"start":{"line":28,"column":3},"end":{"line":28,"column":72}},"5":{"start":{"line":31,"column":0},"end":{"line":232,"column":3}},"6":{"start":{"line":39,"column":6},"end":{"line":39,"column":74}},"7":{"start":{"line":40,"column":6},"end":{"line":42,"column":7}},"8":{"start":{"line":41,"column":10},"end":{"line":41,"column":89}},"9":{"start":{"line":43,"column":6},"end":{"line":43,"column":39}},"10":{"start":{"line":44,"column":6},"end":{"line":44,"column":102}},"11":{"start":{"line":45,"column":6},"end":{"line":45,"column":51}},"12":{"start":{"line":46,"column":6},"end":{"line":46,"column":85}},"13":{"start":{"line":54,"column":6},"end":{"line":54,"column":132}},"14":{"start":{"line":55,"column":6},"end":{"line":55,"column":48}},"15":{"start":{"line":56,"column":6},"end":{"line":56,"column":68}},"16":{"start":{"line":57,"column":6},"end":{"line":57,"column":36}},"17":{"start":{"line":59,"column":6},"end":{"line":59,"column":21}},"18":{"start":{"line":60,"column":6},"end":{"line":60,"column":174}},"19":{"start":{"line":61,"column":6},"end":{"line":61,"column":177}},"20":{"start":{"line":62,"column":6},"end":{"line":62,"column":168}},"21":{"start":{"line":63,"column":6},"end":{"line":63,"column":168}},"22":{"start":{"line":64,"column":6},"end":{"line":64,"column":140}},"23":{"start":{"line":67,"column":6},"end":{"line":71,"column":15}},"24":{"start":{"line":68,"column":9},"end":{"line":68,"column":44}},"25":{"start":{"line":69,"column":9},"end":{"line":69,"column":56}},"26":{"start":{"line":70,"column":9},"end":{"line":70,"column":111}},"27":{"start":{"line":80,"column":6},"end":{"line":82,"column":7}},"28":{"start":{"line":81,"column":9},"end":{"line":81,"column":16}},"29":{"start":{"line":84,"column":6},"end":{"line":84,"column":55}},"30":{"start":{"line":86,"column":6},"end":{"line":92,"column":53}},"31":{"start":{"line":94,"column":6},"end":{"line":94,"column":30}},"32":{"start":{"line":96,"column":6},"end":{"line":96,"column":56}},"33":{"start":{"line":97,"column":6},"end":{"line":97,"column":65}},"34":{"start":{"line":98,"column":6},"end":{"line":98,"column":72}},"35":{"start":{"line":99,"column":6},"end":{"line":99,"column":64}},"36":{"start":{"line":100,"column":6},"end":{"line":100,"column":115}},"37":{"start":{"line":102,"column":6},"end":{"line":104,"column":7}},"38":{"start":{"line":103,"column":9},"end":{"line":103,"column":31}},"39":{"start":{"line":111,"column":6},"end":{"line":111,"column":24}},"40":{"start":{"line":118,"column":6},"end":{"line":118,"column":64}},"41":{"start":{"line":119,"column":6},"end":{"line":119,"column":59}},"42":{"start":{"line":127,"column":6},"end":{"line":127,"column":19}},"43":{"start":{"line":128,"column":6},"end":{"line":128,"column":57}},"44":{"start":{"line":129,"column":6},"end":{"line":129,"column":41}},"45":{"start":{"line":131,"column":6},"end":{"line":132,"column":55}},"46":{"start":{"line":134,"column":6},"end":{"line":140,"column":7}},"47":{"start":{"line":135,"column":9},"end":{"line":135,"column":33}},"48":{"start":{"line":136,"column":9},"end":{"line":136,"column":65}},"49":{"start":{"line":139,"column":9},"end":{"line":139,"column":39}},"50":{"start":{"line":142,"column":6},"end":{"line":142,"column":63}},"51":{"start":{"line":144,"column":6},"end":{"line":148,"column":15}},"52":{"start":{"line":145,"column":9},"end":{"line":145,"column":64}},"53":{"start":{"line":146,"column":9},"end":{"line":146,"column":30}},"54":{"start":{"line":147,"column":9},"end":{"line":147,"column":31}},"55":{"start":{"line":156,"column":6},"end":{"line":156,"column":19}},"56":{"start":{"line":157,"column":6},"end":{"line":164,"column":25}},"57":{"start":{"line":166,"column":6},"end":{"line":176,"column":7}},"58":{"start":{"line":167,"column":9},"end":{"line":167,"column":35}},"59":{"start":{"line":168,"column":9},"end":{"line":168,"column":50}},"60":{"start":{"line":169,"column":9},"end":{"line":169,"column":50}},"61":{"start":{"line":170,"column":9},"end":{"line":170,"column":41}},"62":{"start":{"line":173,"column":9},"end":{"line":173,"column":48}},"63":{"start":{"line":174,"column":9},"end":{"line":174,"column":55}},"64":{"start":{"line":175,"column":9},"end":{"line":175,"column":55}},"65":{"start":{"line":178,"column":6},"end":{"line":178,"column":63}},"66":{"start":{"line":186,"column":6},"end":{"line":190,"column":25}},"67":{"start":{"line":193,"column":6},"end":{"line":196,"column":7}},"68":{"start":{"line":194,"column":9},"end":{"line":195,"column":52}},"69":{"start":{"line":199,"column":6},"end":{"line":206,"column":7}},"70":{"start":{"line":200,"column":8},"end":{"line":205,"column":9}},"71":{"start":{"line":201,"column":11},"end":{"line":201,"column":39}},"72":{"start":{"line":204,"column":11},"end":{"line":204,"column":39}},"73":{"start":{"line":209,"column":6},"end":{"line":223,"column":7}},"74":{"start":{"line":210,"column":9},"end":{"line":222,"column":10}},"75":{"start":{"line":212,"column":12},"end":{"line":213,"column":67}},"76":{"start":{"line":216,"column":12},"end":{"line":218,"column":13}},"77":{"start":{"line":217,"column":15},"end":{"line":217,"column":49}},"78":{"start":{"line":219,"column":12},"end":{"line":221,"column":13}},"79":{"start":{"line":220,"column":15},"end":{"line":220,"column":49}},"80":{"start":{"line":226,"column":6},"end":{"line":226,"column":54}},"81":{"start":{"line":227,"column":6},"end":{"line":227,"column":54}},"82":{"start":{"line":229,"column":6},"end":{"line":229,"column":34}},"83":{"start":{"line":235,"column":0},"end":{"line":235,"column":64}}},"branchMap":{"1":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":6},"end":{"line":40,"column":6}},{"start":{"line":40,"column":6},"end":{"line":40,"column":6}}]},"2":{"line":44,"type":"cond-expr","locations":[{"start":{"line":44,"column":58},"end":{"line":44,"column":93}},{"start":{"line":44,"column":97},"end":{"line":44,"column":101}}]},"3":{"line":45,"type":"binary-expr","locations":[{"start":{"line":45,"column":29},"end":{"line":45,"column":44}},{"start":{"line":45,"column":48},"end":{"line":45,"column":50}}]},"4":{"line":46,"type":"cond-expr","locations":[{"start":{"line":46,"column":61},"end":{"line":46,"column":76}},{"start":{"line":46,"column":79},"end":{"line":46,"column":84}}]},"5":{"line":70,"type":"cond-expr","locations":[{"start":{"line":70,"column":44},"end":{"line":70,"column":62}},{"start":{"line":70,"column":65},"end":{"line":70,"column":102}}]},"6":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":6},"end":{"line":80,"column":6}},{"start":{"line":80,"column":6},"end":{"line":80,"column":6}}]},"7":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":6},"end":{"line":102,"column":6}},{"start":{"line":102,"column":6},"end":{"line":102,"column":6}}]},"8":{"line":134,"type":"if","locations":[{"start":{"line":134,"column":6},"end":{"line":134,"column":6}},{"start":{"line":134,"column":6},"end":{"line":134,"column":6}}]},"9":{"line":166,"type":"if","locations":[{"start":{"line":166,"column":6},"end":{"line":166,"column":6}},{"start":{"line":166,"column":6},"end":{"line":166,"column":6}}]},"10":{"line":174,"type":"cond-expr","locations":[{"start":{"line":174,"column":34},"end":{"line":174,"column":38}},{"start":{"line":174,"column":41},"end":{"line":174,"column":53}}]},"11":{"line":175,"type":"cond-expr","locations":[{"start":{"line":175,"column":34},"end":{"line":175,"column":38}},{"start":{"line":175,"column":41},"end":{"line":175,"column":53}}]},"12":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":6},"end":{"line":193,"column":6}},{"start":{"line":193,"column":6},"end":{"line":193,"column":6}}]},"13":{"line":199,"type":"if","locations":[{"start":{"line":199,"column":6},"end":{"line":199,"column":6}},{"start":{"line":199,"column":6},"end":{"line":199,"column":6}}]},"14":{"line":200,"type":"if","locations":[{"start":{"line":200,"column":8},"end":{"line":200,"column":8}},{"start":{"line":200,"column":8},"end":{"line":200,"column":8}}]},"15":{"line":209,"type":"if","locations":[{"start":{"line":209,"column":6},"end":{"line":209,"column":6}},{"start":{"line":209,"column":6},"end":{"line":209,"column":6}}]},"16":{"line":210,"type":"if","locations":[{"start":{"line":210,"column":9},"end":{"line":210,"column":9}},{"start":{"line":210,"column":9},"end":{"line":210,"column":9}}]},"17":{"line":216,"type":"if","locations":[{"start":{"line":216,"column":12},"end":{"line":216,"column":12}},{"start":{"line":216,"column":12},"end":{"line":216,"column":12}}]},"18":{"line":219,"type":"if","locations":[{"start":{"line":219,"column":12},"end":{"line":219,"column":12}},{"start":{"line":219,"column":12},"end":{"line":219,"column":12}}]}},"code":["(function () { YUI.add('inputex-imagecropper', function (Y, NAME) {","","/**"," * @module inputex-imagecropper"," */","   var lang    = Y.Lang,","       inputEx = Y.inputEx;","","/**"," * Basic image cropper field."," * Returns an object with the following properties :"," *   - origin <array> [x,y]"," *   - size   <array> [width, height]"," *"," * @class inputEx.ImageCropperField"," * @extends inputEx.Field"," * @constructor"," * @param {Object} options Added options:"," * <ul>"," *   <li>url: image url</li>"," *   <li>ratio: null or array like [width, height]</li>"," *   <li>minSize: null or array like [width, height]</li>"," *   <li>value: object, initial value. See returned value</li>"," *   <li>padding: integer, padding </li>"," * </ul>"," */","inputEx.ImageCropperField = function(options) {","   inputEx.ImageCropperField.superclass.constructor.call(this, options);","};","","Y.extend(inputEx.ImageCropperField, inputEx.Field, {","   ","   /**","    * Set the default values of the options","    * @method setOptions","    * @param {Object} options Options object as passed to the constructor","    */","   setOptions: function(options) {","      inputEx.ImageCropperField.superclass.setOptions.call(this, options);","      if(!options.url){","          throw new Error(\"'url' has to be provided in options for 'imagecropper' type\");","      }","      this.options.url   = options.url;","      this.options.ratio = lang.isArray(options.ratio) ? (options.ratio[0] / options.ratio[1]) : null;","      this.options.padding = options.padding || 10;","      this.options.minSize = lang.isArray(options.minSize) ? options.minSize : [0,0];","   },","","   /**","    * Render","    * @method renderComponent","    */","   renderComponent: function() {","      this.wrapEl = Y.Node.create('<div class=\"inputEx-ImageCropperField-wrapper\" style=\"padding: '+this.options.padding+'px;\" />');","      this.wrapEl.appendTo(this.fieldContainer);","      this.el = Y.Node.create('<img src=\"'+this.options.url+'\" />');","      this.el.appendTo(this.wrapEl);","","      this.mask = {};","      this.mask.n       = Y.Node.create('<div class=\"inputEx-ImageCropperField-mask inputEx-ImageCropperField-mask-n\" style=\"top: 0; left: 0;\"></div>').appendTo(this.wrapEl);","      this.mask.s       = Y.Node.create('<div class=\"inputEx-ImageCropperField-mask inputEx-ImageCropperField-mask-s\" style=\"bottom: 0; left: 0;\"></div>').appendTo(this.wrapEl);","      this.mask.e       = Y.Node.create('<div class=\"inputEx-ImageCropperField-mask inputEx-ImageCropperField-mask-e\" style=\"right: 0; \"></div>').appendTo(this.wrapEl);","      this.mask.w       = Y.Node.create('<div class=\"inputEx-ImageCropperField-mask inputEx-ImageCropperField-mask-w\" style=\"left: 0;  \"></div>').appendTo(this.wrapEl);","      this.mask.border  = Y.Node.create('<div class=\"inputEx-ImageCropperField-mask-border\" style=\"left: 0;\"></div>').appendTo(this.wrapEl);","","      // Wait for the image to be downloaded, then retrieve its size","      this.el.on('load', function () {","         var region = this.el.get('region');","         this.imageSize = [region.width, region.height];","         this.setValue(this.options.value ? this.options.value : {origin: [0,0], size: this.imageSize}, false);","      }, this);","   },","","   /**","    * Set the value","    * @method setValue","    */","   setValue: function (value, sendUpdatedEvt) {","","      if (!this.imageSize) {","         return;","      }","","      var cleanValue = this._constrain(Y.clone(value));","","      var padding = this.options.padding,","          n = padding + cleanValue.origin[1],","          s = padding + cleanValue.origin[1] + cleanValue.size[1],","          e = padding + cleanValue.origin[0] + cleanValue.size[0],","          w = padding + cleanValue.origin[0],","          width  = (padding * 2) + this.imageSize[0],","          height = (padding * 2) + this.imageSize[1];","","      this.value = cleanValue;","","      this.mask.n.setStyles ({width: width, height: n});","      this.mask.s.setStyles ({width: width, height: height - s});","      this.mask.e.setStyles ({top: n, height: s - n, width: width - e});","      this.mask.w.setStyles ({top: n, height: s - n, width: w});","      this.mask.border.setStyles({top: n - 1, left: w - 1, width: cleanValue.size[0], height: cleanValue.size[1]});","","      if(sendUpdatedEvt !== false) {","         this.fireUpdatedEvt();","      }","   },","","   /**","    * @method getValue","    */","   getValue: function () {","      return this.value;","   },","","   /**","    * @method initEvents","    */","   initEvents: function () {","      this.mask.border.on('mousedown', this._onMouseDown, this);","      this.wrapEl.on('mousedown', this._onMouseDown, this);","   },","","   /**","    * @method _onMouseDown","    * @private","    */","   _onMouseDown: function (e) {","      e.halt(true);","      this.dragging    = (e.target === this.mask.border);","      this.imageOrigin = this.el.getXY();","","      var clicOrigin = [e.pageX - this.imageOrigin[0],","                        e.pageY - this.imageOrigin[1]];","","      if (!this.dragging) {","         this.firstOrigin = null;","         this.setValue({origin: clicOrigin, size: [1,1]}, false);","      }","      else {","         this.firstOrigin = clicOrigin;","      }","","      Y.one(document).on('mousemove', this._onMouseMove, this);","","      Y.one(document).once('mouseup', function (e) {","         Y.one(document).detach('mousemove', this._onMouseMove);","         this._onMouseMove(e); // setValue one last time","         this.fireUpdatedEvt();","      }, this);","   },","","   /**","    * @method _onMouseMove","    * @private","    */","   _onMouseMove: function (e) {","      e.halt(true); // prevent text selection","      var imageOrigin = this.imageOrigin,","          oldOrigin = this.firstOrigin,","          relX = Math.min(this.imageSize[0], Math.max(0, e.pageX - imageOrigin[0])),","          relY = Math.min(this.imageSize[1], Math.max(0, e.pageY - imageOrigin[1])),","          dX = relX - oldOrigin[0],","          dY = relY - oldOrigin[1],","          newSize = [],","          newOrigin = [];","","      if (this.dragging) {","         newSize = this.value.size;","         newOrigin[0] = this.value.origin[0] + dX;","         newOrigin[1] = this.value.origin[1] + dY;","         this.firstOrigin = [relX, relY];","      }","      else {","         newSize = [Math.abs(dX), Math.abs(dY)];","         newOrigin[0] = (dX < 0 ? relX : oldOrigin[0]);","         newOrigin[1] = (dY < 0 ? relY : oldOrigin[1]);","      }","","      this.setValue({origin: newOrigin, size: newSize}, false);","   },","   ","   /**","    * @method _contrain","    * @private","    */","   _constrain: function (value) {","      var r = this.options.ratio,","          i = this.imageSize,","          m = this.options.minSize,","          o = value.origin,","          s = value.size;","","      // Match minSize if needed","      if (m) {","         s = [Math.min(i[0], Math.max(m[0], s[0])),","              Math.min(i[1], Math.max(m[1], s[1]))];","      }","","      // Adjust size to match the ratio","      if (r) {","        if ((s[0] / s[1]) < r) {","           s[1] = Math.round(s[0] / r);","        }","        else {","           s[0] = Math.round(s[1] * r);","        }","      }","","      // Adjust origin in case the size changed","      if (!this.dragging) {","         if (!this.firstOrigin) {","            // firstOrigin refers to the original clic position","            this.firstOrigin = [Math.max(0, Math.min(i[0], o[0])),","                                Math.max(0, Math.min(i[1], o[1]))];","         }","         else {","            if (o[0] < this.firstOrigin[0]) {","               o[0] = this.firstOrigin[0] - s[0];","            }","            if (o[1] < this.firstOrigin[1]) {","               o[1] = this.firstOrigin[1] - s[1];","            }","         }","      }","","      // The real crop area origin isn't always equal to firstOrigin","      o[0] = Math.max(0, Math.min(i[0] - s[0], o[0]));","      o[1] = Math.max(0, Math.min(i[1] - s[1], o[1]));","","      return {origin: o, size: s};","   }","","});","","// Register this class as \"imagecropper\" type","inputEx.registerType(\"imagecropper\", inputEx.ImageCropperField);","","","}, '@VERSION@', {\"requires\": [\"inputex-field\"], \"ix_provides\": \"imagecropper\", \"skinnable\": true});","","}());"]};
}
var __cov_wkbyC0khOTmGGE8JzZZLyA = __coverage__['build/inputex-imagecropper/inputex-imagecropper.js'];
__cov_wkbyC0khOTmGGE8JzZZLyA.s['1']++;YUI.add('inputex-imagecropper',function(Y,NAME){__cov_wkbyC0khOTmGGE8JzZZLyA.f['1']++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['2']++;var lang=Y.Lang,inputEx=Y.inputEx;__cov_wkbyC0khOTmGGE8JzZZLyA.s['3']++;inputEx.ImageCropperField=function(options){__cov_wkbyC0khOTmGGE8JzZZLyA.f['2']++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['4']++;inputEx.ImageCropperField.superclass.constructor.call(this,options);};__cov_wkbyC0khOTmGGE8JzZZLyA.s['5']++;Y.extend(inputEx.ImageCropperField,inputEx.Field,{setOptions:function(options){__cov_wkbyC0khOTmGGE8JzZZLyA.f['3']++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['6']++;inputEx.ImageCropperField.superclass.setOptions.call(this,options);__cov_wkbyC0khOTmGGE8JzZZLyA.s['7']++;if(!options.url){__cov_wkbyC0khOTmGGE8JzZZLyA.b['1'][0]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['8']++;throw new Error('\'url\' has to be provided in options for \'imagecropper\' type');}else{__cov_wkbyC0khOTmGGE8JzZZLyA.b['1'][1]++;}__cov_wkbyC0khOTmGGE8JzZZLyA.s['9']++;this.options.url=options.url;__cov_wkbyC0khOTmGGE8JzZZLyA.s['10']++;this.options.ratio=lang.isArray(options.ratio)?(__cov_wkbyC0khOTmGGE8JzZZLyA.b['2'][0]++,options.ratio[0]/options.ratio[1]):(__cov_wkbyC0khOTmGGE8JzZZLyA.b['2'][1]++,null);__cov_wkbyC0khOTmGGE8JzZZLyA.s['11']++;this.options.padding=(__cov_wkbyC0khOTmGGE8JzZZLyA.b['3'][0]++,options.padding)||(__cov_wkbyC0khOTmGGE8JzZZLyA.b['3'][1]++,10);__cov_wkbyC0khOTmGGE8JzZZLyA.s['12']++;this.options.minSize=lang.isArray(options.minSize)?(__cov_wkbyC0khOTmGGE8JzZZLyA.b['4'][0]++,options.minSize):(__cov_wkbyC0khOTmGGE8JzZZLyA.b['4'][1]++,[0,0]);},renderComponent:function(){__cov_wkbyC0khOTmGGE8JzZZLyA.f['4']++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['13']++;this.wrapEl=Y.Node.create('<div class="inputEx-ImageCropperField-wrapper" style="padding: '+this.options.padding+'px;" />');__cov_wkbyC0khOTmGGE8JzZZLyA.s['14']++;this.wrapEl.appendTo(this.fieldContainer);__cov_wkbyC0khOTmGGE8JzZZLyA.s['15']++;this.el=Y.Node.create('<img src="'+this.options.url+'" />');__cov_wkbyC0khOTmGGE8JzZZLyA.s['16']++;this.el.appendTo(this.wrapEl);__cov_wkbyC0khOTmGGE8JzZZLyA.s['17']++;this.mask={};__cov_wkbyC0khOTmGGE8JzZZLyA.s['18']++;this.mask.n=Y.Node.create('<div class="inputEx-ImageCropperField-mask inputEx-ImageCropperField-mask-n" style="top: 0; left: 0;"></div>').appendTo(this.wrapEl);__cov_wkbyC0khOTmGGE8JzZZLyA.s['19']++;this.mask.s=Y.Node.create('<div class="inputEx-ImageCropperField-mask inputEx-ImageCropperField-mask-s" style="bottom: 0; left: 0;"></div>').appendTo(this.wrapEl);__cov_wkbyC0khOTmGGE8JzZZLyA.s['20']++;this.mask.e=Y.Node.create('<div class="inputEx-ImageCropperField-mask inputEx-ImageCropperField-mask-e" style="right: 0; "></div>').appendTo(this.wrapEl);__cov_wkbyC0khOTmGGE8JzZZLyA.s['21']++;this.mask.w=Y.Node.create('<div class="inputEx-ImageCropperField-mask inputEx-ImageCropperField-mask-w" style="left: 0;  "></div>').appendTo(this.wrapEl);__cov_wkbyC0khOTmGGE8JzZZLyA.s['22']++;this.mask.border=Y.Node.create('<div class="inputEx-ImageCropperField-mask-border" style="left: 0;"></div>').appendTo(this.wrapEl);__cov_wkbyC0khOTmGGE8JzZZLyA.s['23']++;this.el.on('load',function(){__cov_wkbyC0khOTmGGE8JzZZLyA.f['5']++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['24']++;var region=this.el.get('region');__cov_wkbyC0khOTmGGE8JzZZLyA.s['25']++;this.imageSize=[region.width,region.height];__cov_wkbyC0khOTmGGE8JzZZLyA.s['26']++;this.setValue(this.options.value?(__cov_wkbyC0khOTmGGE8JzZZLyA.b['5'][0]++,this.options.value):(__cov_wkbyC0khOTmGGE8JzZZLyA.b['5'][1]++,{origin:[0,0],size:this.imageSize}),false);},this);},setValue:function(value,sendUpdatedEvt){__cov_wkbyC0khOTmGGE8JzZZLyA.f['6']++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['27']++;if(!this.imageSize){__cov_wkbyC0khOTmGGE8JzZZLyA.b['6'][0]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['28']++;return;}else{__cov_wkbyC0khOTmGGE8JzZZLyA.b['6'][1]++;}__cov_wkbyC0khOTmGGE8JzZZLyA.s['29']++;var cleanValue=this._constrain(Y.clone(value));__cov_wkbyC0khOTmGGE8JzZZLyA.s['30']++;var padding=this.options.padding,n=padding+cleanValue.origin[1],s=padding+cleanValue.origin[1]+cleanValue.size[1],e=padding+cleanValue.origin[0]+cleanValue.size[0],w=padding+cleanValue.origin[0],width=padding*2+this.imageSize[0],height=padding*2+this.imageSize[1];__cov_wkbyC0khOTmGGE8JzZZLyA.s['31']++;this.value=cleanValue;__cov_wkbyC0khOTmGGE8JzZZLyA.s['32']++;this.mask.n.setStyles({width:width,height:n});__cov_wkbyC0khOTmGGE8JzZZLyA.s['33']++;this.mask.s.setStyles({width:width,height:height-s});__cov_wkbyC0khOTmGGE8JzZZLyA.s['34']++;this.mask.e.setStyles({top:n,height:s-n,width:width-e});__cov_wkbyC0khOTmGGE8JzZZLyA.s['35']++;this.mask.w.setStyles({top:n,height:s-n,width:w});__cov_wkbyC0khOTmGGE8JzZZLyA.s['36']++;this.mask.border.setStyles({top:n-1,left:w-1,width:cleanValue.size[0],height:cleanValue.size[1]});__cov_wkbyC0khOTmGGE8JzZZLyA.s['37']++;if(sendUpdatedEvt!==false){__cov_wkbyC0khOTmGGE8JzZZLyA.b['7'][0]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['38']++;this.fireUpdatedEvt();}else{__cov_wkbyC0khOTmGGE8JzZZLyA.b['7'][1]++;}},getValue:function(){__cov_wkbyC0khOTmGGE8JzZZLyA.f['7']++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['39']++;return this.value;},initEvents:function(){__cov_wkbyC0khOTmGGE8JzZZLyA.f['8']++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['40']++;this.mask.border.on('mousedown',this._onMouseDown,this);__cov_wkbyC0khOTmGGE8JzZZLyA.s['41']++;this.wrapEl.on('mousedown',this._onMouseDown,this);},_onMouseDown:function(e){__cov_wkbyC0khOTmGGE8JzZZLyA.f['9']++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['42']++;e.halt(true);__cov_wkbyC0khOTmGGE8JzZZLyA.s['43']++;this.dragging=e.target===this.mask.border;__cov_wkbyC0khOTmGGE8JzZZLyA.s['44']++;this.imageOrigin=this.el.getXY();__cov_wkbyC0khOTmGGE8JzZZLyA.s['45']++;var clicOrigin=[e.pageX-this.imageOrigin[0],e.pageY-this.imageOrigin[1]];__cov_wkbyC0khOTmGGE8JzZZLyA.s['46']++;if(!this.dragging){__cov_wkbyC0khOTmGGE8JzZZLyA.b['8'][0]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['47']++;this.firstOrigin=null;__cov_wkbyC0khOTmGGE8JzZZLyA.s['48']++;this.setValue({origin:clicOrigin,size:[1,1]},false);}else{__cov_wkbyC0khOTmGGE8JzZZLyA.b['8'][1]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['49']++;this.firstOrigin=clicOrigin;}__cov_wkbyC0khOTmGGE8JzZZLyA.s['50']++;Y.one(document).on('mousemove',this._onMouseMove,this);__cov_wkbyC0khOTmGGE8JzZZLyA.s['51']++;Y.one(document).once('mouseup',function(e){__cov_wkbyC0khOTmGGE8JzZZLyA.f['10']++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['52']++;Y.one(document).detach('mousemove',this._onMouseMove);__cov_wkbyC0khOTmGGE8JzZZLyA.s['53']++;this._onMouseMove(e);__cov_wkbyC0khOTmGGE8JzZZLyA.s['54']++;this.fireUpdatedEvt();},this);},_onMouseMove:function(e){__cov_wkbyC0khOTmGGE8JzZZLyA.f['11']++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['55']++;e.halt(true);__cov_wkbyC0khOTmGGE8JzZZLyA.s['56']++;var imageOrigin=this.imageOrigin,oldOrigin=this.firstOrigin,relX=Math.min(this.imageSize[0],Math.max(0,e.pageX-imageOrigin[0])),relY=Math.min(this.imageSize[1],Math.max(0,e.pageY-imageOrigin[1])),dX=relX-oldOrigin[0],dY=relY-oldOrigin[1],newSize=[],newOrigin=[];__cov_wkbyC0khOTmGGE8JzZZLyA.s['57']++;if(this.dragging){__cov_wkbyC0khOTmGGE8JzZZLyA.b['9'][0]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['58']++;newSize=this.value.size;__cov_wkbyC0khOTmGGE8JzZZLyA.s['59']++;newOrigin[0]=this.value.origin[0]+dX;__cov_wkbyC0khOTmGGE8JzZZLyA.s['60']++;newOrigin[1]=this.value.origin[1]+dY;__cov_wkbyC0khOTmGGE8JzZZLyA.s['61']++;this.firstOrigin=[relX,relY];}else{__cov_wkbyC0khOTmGGE8JzZZLyA.b['9'][1]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['62']++;newSize=[Math.abs(dX),Math.abs(dY)];__cov_wkbyC0khOTmGGE8JzZZLyA.s['63']++;newOrigin[0]=dX<0?(__cov_wkbyC0khOTmGGE8JzZZLyA.b['10'][0]++,relX):(__cov_wkbyC0khOTmGGE8JzZZLyA.b['10'][1]++,oldOrigin[0]);__cov_wkbyC0khOTmGGE8JzZZLyA.s['64']++;newOrigin[1]=dY<0?(__cov_wkbyC0khOTmGGE8JzZZLyA.b['11'][0]++,relY):(__cov_wkbyC0khOTmGGE8JzZZLyA.b['11'][1]++,oldOrigin[1]);}__cov_wkbyC0khOTmGGE8JzZZLyA.s['65']++;this.setValue({origin:newOrigin,size:newSize},false);},_constrain:function(value){__cov_wkbyC0khOTmGGE8JzZZLyA.f['12']++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['66']++;var r=this.options.ratio,i=this.imageSize,m=this.options.minSize,o=value.origin,s=value.size;__cov_wkbyC0khOTmGGE8JzZZLyA.s['67']++;if(m){__cov_wkbyC0khOTmGGE8JzZZLyA.b['12'][0]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['68']++;s=[Math.min(i[0],Math.max(m[0],s[0])),Math.min(i[1],Math.max(m[1],s[1]))];}else{__cov_wkbyC0khOTmGGE8JzZZLyA.b['12'][1]++;}__cov_wkbyC0khOTmGGE8JzZZLyA.s['69']++;if(r){__cov_wkbyC0khOTmGGE8JzZZLyA.b['13'][0]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['70']++;if(s[0]/s[1]<r){__cov_wkbyC0khOTmGGE8JzZZLyA.b['14'][0]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['71']++;s[1]=Math.round(s[0]/r);}else{__cov_wkbyC0khOTmGGE8JzZZLyA.b['14'][1]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['72']++;s[0]=Math.round(s[1]*r);}}else{__cov_wkbyC0khOTmGGE8JzZZLyA.b['13'][1]++;}__cov_wkbyC0khOTmGGE8JzZZLyA.s['73']++;if(!this.dragging){__cov_wkbyC0khOTmGGE8JzZZLyA.b['15'][0]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['74']++;if(!this.firstOrigin){__cov_wkbyC0khOTmGGE8JzZZLyA.b['16'][0]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['75']++;this.firstOrigin=[Math.max(0,Math.min(i[0],o[0])),Math.max(0,Math.min(i[1],o[1]))];}else{__cov_wkbyC0khOTmGGE8JzZZLyA.b['16'][1]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['76']++;if(o[0]<this.firstOrigin[0]){__cov_wkbyC0khOTmGGE8JzZZLyA.b['17'][0]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['77']++;o[0]=this.firstOrigin[0]-s[0];}else{__cov_wkbyC0khOTmGGE8JzZZLyA.b['17'][1]++;}__cov_wkbyC0khOTmGGE8JzZZLyA.s['78']++;if(o[1]<this.firstOrigin[1]){__cov_wkbyC0khOTmGGE8JzZZLyA.b['18'][0]++;__cov_wkbyC0khOTmGGE8JzZZLyA.s['79']++;o[1]=this.firstOrigin[1]-s[1];}else{__cov_wkbyC0khOTmGGE8JzZZLyA.b['18'][1]++;}}}else{__cov_wkbyC0khOTmGGE8JzZZLyA.b['15'][1]++;}__cov_wkbyC0khOTmGGE8JzZZLyA.s['80']++;o[0]=Math.max(0,Math.min(i[0]-s[0],o[0]));__cov_wkbyC0khOTmGGE8JzZZLyA.s['81']++;o[1]=Math.max(0,Math.min(i[1]-s[1],o[1]));__cov_wkbyC0khOTmGGE8JzZZLyA.s['82']++;return{origin:o,size:s};}});__cov_wkbyC0khOTmGGE8JzZZLyA.s['83']++;inputEx.registerType('imagecropper',inputEx.ImageCropperField);},'@VERSION@',{'requires':['inputex-field'],'ix_provides':'imagecropper','skinnable':true});
